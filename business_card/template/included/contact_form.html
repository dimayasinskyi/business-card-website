{% if errors %}
<div style="background-color: rgba(255, 0, 0, 0.8); margin: 0 20px 0 20px;">
    {% for error in errors %}
    <p>{{ error }}</p>
    {% endfor %}
</div>
{% endif %}

<form method="post" enctype="multipart/form-data" class="mt-3">
    {% csrf_token %}
    {{ form.as_p }}
    <label for="vacancy-file" class="file-label">Vacancy file</label>
    <span id="file-name">Файл не вибрано</span>
    {{ form.file }}
    <div style="margin-top: 1rem;">
        <button class="btn primary post" type="submit">Post</button>
    </div>
</form>

{% if success %}
<script>
    window.location.href = window.location.href;
    alert("The form has been successfully submitted.");
</script>
{% endif %}

<script>
    const input = document.getElementById("vacancy-file");
    const fileName = document.getElementById("file-name");

    input.addEventListener("change", () => {
        fileName.textContent = input.files[0]?.name || "Файл не вибрано";
    });

    document.querySelector("form").addEventListener("submit", function (e) {
        const phone = document.getElementby("phone").value.trim();
        const message = document.getElementby("message").value.trim();
        const file = document.getElementby("file").value;

        if (!phone && !message && !file) {
            alert("Send at least your phone number or a message or a file");
            e.preventDefault();
        }
    });
</script>